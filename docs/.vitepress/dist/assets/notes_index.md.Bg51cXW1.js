import{_ as V,a0 as D,r as x,j as h,v as E,c as n,k as s,b as H,t as r,a1 as J,a2 as R,l as i,f as p,F as C,C as A,o as l,n as N,Z as T}from"./chunks/framework.mLV7tZpG.js";import{u as U}from"./chunks/theme.ChE3r1wV.js";async function z(){try{const u=await fetch("https://us-west2-dujing-suibi.cloudfunctions.net/get-notes",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({all:!0})});if(!u.ok)throw new Error(`HTTP error! status: ${u.status}`);return await u.json()}catch(u){throw console.error("Error fetching notes:",u),u}}const Z={key:0,class:"loading"},q={key:1,class:"error"},G={key:2,class:"notes-container"},K={class:"filters"},Q={class:"search-box"},W={key:0,class:"active-filters"},X={key:0,class:"filter-group"},Y={key:1,class:"filter-group"},ee={key:2,class:"filter-group"},te={class:"results-info"},se=["onClick"],oe={class:"content-row"},ae=["onClick"],ne=["innerHTML"],le={class:"authors"},ie=["onClick"],re={class:"tags"},ce=["onClick"],ue={key:0,class:"pagination"},de=["disabled"],ve={class:"page-info"},pe=["disabled"],_e=JSON.parse('{"title":"Notes","description":"","frontmatter":{},"headers":[],"relativePath":"notes/index.md","filePath":"notes/index.md"}'),fe={name:"notes/index.md"},ge=Object.assign(fe,{setup(u){const F=D(),{activeFilters:a,currentPage:d,notes:S,setFilter:L,clearFilter:f,setPage:j,setNotes:M}=U(),w=x(!0),k=x(null),_=10,v=x(""),b=h(()=>{let t=S.value;if(v.value){const e=v.value.toLowerCase();t=t.filter(o=>o.text.toLowerCase().includes(e))}return a.value.book&&(t=t.filter(e=>e.book===a.value.book)),a.value.author&&(t=t.filter(e=>Array.isArray(e.selectedAuthors)&&e.selectedAuthors.includes(a.value.author))),a.value.tag&&(t=t.filter(e=>Array.isArray(e.tags)&&e.tags.includes(a.value.tag))),t}),$=h(()=>{const t=(d.value-1)*_,e=t+_;return b.value.slice(t,e)}),g=h(()=>Math.ceil(b.value.length/_)),O=h(()=>Object.values(a.value).some(t=>t!==null)||v.value!=="");function P(t){t>=1&&t<=g.value&&j(t)}function y(t,e){a.value[t]===e?f(t):L(t,e)}function m(t,e){return a.value[t]===e}function B(t){const e=btoa(unescape(encodeURIComponent(JSON.stringify(t)))).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"");F.go(`/notes/detail?data=${e}`)}return E(async()=>{try{const t=await z();M(t)}catch{k.value="Failed to load notes"}finally{w.value=!1}}),(t,e)=>(l(),n("div",null,[e[11]||(e[11]=s("h1",{id:"notes",tabindex:"-1"},[H("Notes "),s("a",{class:"header-anchor",href:"#notes","aria-label":'Permalink to "Notes"'},"​")],-1)),w.value?(l(),n("div",Z,"Loading notes...")):k.value?(l(),n("div",q,r(k.value),1)):(l(),n("div",G,[s("div",K,[s("div",Q,[J(s("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=o=>v.value=o),placeholder:"Search in notes...",class:"search-input"},null,512),[[R,v.value]])]),O.value?(l(),n("div",W,[i(a).book?(l(),n("div",X,[e[6]||(e[6]=s("span",{class:"filter-label"},"Book:",-1)),s("span",{class:"chip book active",onClick:e[1]||(e[1]=o=>i(f)("book"))},r(i(a).book)+" × ",1)])):p("",!0),i(a).author?(l(),n("div",Y,[e[7]||(e[7]=s("span",{class:"filter-label"},"Author:",-1)),s("span",{class:"chip author active",onClick:e[2]||(e[2]=o=>i(f)("author"))},r(i(a).author)+" × ",1)])):p("",!0),i(a).tag?(l(),n("div",ee,[e[8]||(e[8]=s("span",{class:"filter-label"},"Tag:",-1)),s("span",{class:"chip tag active",onClick:e[3]||(e[3]=o=>i(f)("tag"))},r(i(a).tag)+" × ",1)])):p("",!0)])):p("",!0)]),s("div",te," Showing "+r($.value.length)+" of "+r(b.value.length)+" results ",1),(l(!0),n(C,null,A($.value,o=>(l(),n("div",{key:o.id,class:"note-item",onClick:c=>B(o),role:"link",tabindex:"0"},[s("div",oe,[s("span",{class:N(["chip book",{active:m("book",o.book)}]),onClick:T(c=>y("book",o.book),["stop"])},r(o.book)+" "+r(o.chapter)+":"+r(o.verse),11,ae),s("div",{class:"text",innerHTML:o.text},null,8,ne)]),s("div",le,[e[9]||(e[9]=s("span",{class:"label"},"Authors:",-1)),(l(!0),n(C,null,A(Array.isArray(o.selectedAuthors)?o.selectedAuthors:[],c=>(l(),n("span",{key:c,class:N(["chip author",{active:m("author",c)}]),onClick:T(I=>y("author",c),["stop"])},r(c),11,ie))),128))]),s("div",re,[e[10]||(e[10]=s("span",{class:"label"},"Tags:",-1)),(l(!0),n(C,null,A(Array.isArray(o.tags)?o.tags:[],c=>(l(),n("span",{key:c,class:N(["chip tag",{active:m("tag",c)}]),onClick:T(I=>y("tag",c),["stop"])},r(c),11,ce))),128))])],8,se))),128)),g.value>1?(l(),n("div",ue,[s("button",{disabled:i(d)===1,onClick:e[4]||(e[4]=o=>P(i(d)-1)),class:"page-button"},"Previous",8,de),s("span",ve,"Page "+r(i(d))+" of "+r(g.value),1),s("button",{disabled:i(d)===g.value,onClick:e[5]||(e[5]=o=>P(i(d)+1)),class:"page-button"},"Next",8,pe)])):p("",!0)]))]))}}),be=V(ge,[["__scopeId","data-v-defcd0ce"]]);export{_e as __pageData,be as default};
